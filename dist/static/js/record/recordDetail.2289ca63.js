"use strict";(self["webpackChunkfacility_app"]=self["webpackChunkfacility_app"]||[]).push([[717],{2888:function(e,n,t){t.d(n,{Gw:function(){return i},Xi:function(){return l},bF:function(){return a},fc:function(){return c}});t(7658);function a(e,n,t){const a=new Date(n),l=new Date(t),i=[],c=new Date(a);while(c<=l){const n=c.toISOString().split("T")[0];e.includes(n)||i.push(n),c.setDate(c.getDate()+1)}return i}function l(e,n){function t(e){const[n,t]=e.split(":").map((e=>Number(e)));return 60*n+t}let a=t(e),l=t(n);return a-l}function i(e){const n=new Date(e),t=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),c=String(n.getMinutes()).padStart(2,"0"),o=String(n.getSeconds()).padStart(2,"0"),r=`${t}-${a}-${l} ${i}:${c}:${o}`;return r}function c(e){var n=e.replace("T"," ");return n}},3737:function(){},3930:function(e,n,t){t.r(n),t.d(n,{default:function(){return ae}});var a=t(356),l=(t(4332),t(2473)),i=t(9812),c=t(1882),o=t(2469),r=t(8586);const[s,u]=(0,c["do"])("steps"),d={active:(0,o.SI)(0),direction:(0,o.SQ)("horizontal"),activeIcon:(0,o.SQ)("checked"),iconPrefix:String,finishIcon:String,activeColor:String,inactiveIcon:String,inactiveColor:String},f=Symbol(s);var v=(0,i.aZ)({name:s,props:d,emits:["clickStep"],setup(e,{emit:n,slots:t}){const{linkChildren:a}=(0,r.$E)(f),l=e=>n("clickStep",e);return a({props:e,onClickStep:l}),()=>{var n;return(0,i.Wm)("div",{class:u([e.direction])},[(0,i.Wm)("div",{class:u("items")},[null==(n=t.default)?void 0:n.call(t)])])}}});const m=(0,l.n)(v);t(1958);var w=t(8336),p=t(4874);const[k,g]=(0,c["do"])("step");var _=(0,i.aZ)({name:k,setup(e,{slots:n}){const{parent:t,index:a}=(0,r.NB)(f);if(!t)return void 0;const l=t.props,c=()=>{const e=+l.active;return a.value<e?"finish":a.value===e?"process":"waiting"},o=()=>"process"===c(),s=(0,i.Fl)((()=>({background:"finish"===c()?l.activeColor:l.inactiveColor}))),u=(0,i.Fl)((()=>o()?{color:l.activeColor}:"waiting"===c()?{color:l.inactiveColor}:void 0)),d=()=>t.onClickStep(a.value),v=()=>{const{iconPrefix:e,finishIcon:t,activeIcon:a,activeColor:r,inactiveIcon:u}=l;return o()?n["active-icon"]?n["active-icon"]():(0,i.Wm)(p.JO,{class:g("icon","active"),name:a,color:r,classPrefix:e},null):"finish"===c()&&(t||n["finish-icon"])?n["finish-icon"]?n["finish-icon"]():(0,i.Wm)(p.JO,{class:g("icon","finish"),name:t,color:r,classPrefix:e},null):n["inactive-icon"]?n["inactive-icon"]():u?(0,i.Wm)(p.JO,{class:g("icon"),name:u,classPrefix:e},null):(0,i.Wm)("i",{class:g("circle"),style:s.value},null)};return()=>{var e;const t=c();return(0,i.Wm)("div",{class:[w.T5,g([l.direction,{[t]:t}])]},[(0,i.Wm)("div",{class:g("title",{active:o()}),style:u.value,onClick:d},[null==(e=n.default)?void 0:e.call(n)]),(0,i.Wm)("div",{class:g("circle-container"),onClick:d},[v()]),(0,i.Wm)("div",{class:g("line"),style:s.value},null)])}}});const h=(0,l.n)(_);t(368),t(6742);var S=t(3749),U=(t(2480),t(7468)),y=(t(2304),t(5073)),W=(t(7038),t(5881)),b=(t(7370),t(521)),C=t(5893),D=t(644),I=t(1443),z=t(704),T=t(9226),q=t(2888);const x=e=>((0,i.dD)("data-v-76d25a9b"),e=e(),(0,i.Cn)(),e),$={class:"recordDetail"},J={key:0,class:"top_status"},P=x((()=>(0,i._)("div",null,"预约最终状态",-1))),j={style:{color:"red"}},H={key:0,class:"card_center"},F={class:"steps"},L={key:0},O=x((()=>(0,i._)("h3",null,"提交预约设施申请",-1))),A={key:1},N=x((()=>(0,i._)("h3",null,"用户取消预约设施",-1))),R={key:2},X=x((()=>(0,i._)("h3",null,"管理员同意预约请求",-1))),Y={key:3},Z=x((()=>(0,i._)("h3",null,"管理员不同意预约请求",-1))),E={key:4},M=x((()=>(0,i._)("h3",null,"用户取消预约设施",-1))),Q={key:5},B=x((()=>(0,i._)("h3",null,"签到使用",-1))),G={key:6},K=x((()=>(0,i._)("h3",null,"未签到",-1))),V={style:{width:"96vw",margin:"20px auto",right:"0",left:"0"}};var ee={__name:"RecordDetail",setup(e){let n=(0,D.tv)(),t=n.currentRoute.value.query.reservationId,l=(0,b.iH)(),c=(0,b.iH)(),o=(0,b.iH)({number:0,text:""});function r(){(0,I.y$)(l.value.roomIdSeatId).then((e=>{c.value=e.data.seatNumber}))}function s(e){return"Pending"==e?"审核中":"Canceled"==e?"取消":"AdminAgree"==e?"待签到使用":"AdminCanceled"==e?"管理员取消":"UnConfirmed"==e?"未签到":"Confirmed"==e?"结束（已签到）":void 0}(0,I.Ry)(t).then((e=>{console.log("recordDetail",e.data),l.value=e.data,(0,I.Yo)(e.data.roomId).then((e=>{l.value.roomId=e.data})),"room_facility_code"==l.value.reservationType&&r()}));let u=(0,b.iH)([]);function d(){(0,z.WD)({title:"提示",message:"确定取消该条预约申请吗？",theme:"round-button"}).then((()=>{console.log("取消预约id",t,l.value.reservationDetailId,u.value.length),(0,I.rJ)(t,l.value.reservationDetailId,u.value.length).then((e=>{console.log(1==e.data,e.data),!0===e.data?(0,z.vC)({message:"取消预约申请成功！",theme:"round-button"}).then((()=>{f()})):(0,T.LJ)("请重试！")})).catch((e=>{(0,T.LJ)("请稍后重试！")}))})).catch((()=>{}))}function f(e){n.back()}return(0,I.sP)(t).then((e=>{console.log(e.data),u.value=e.data,e.data.length>0&&e.data.forEach(((e,n)=>{switch(e.handlerCode){case 101:o.value.number=1;break;case 102:o.value.number=2;break;case 103:o.value.number=1;break;case 104:o.value.number=2;break;case 105:o.value.number=2;break;case 106:o.value.number=2;break;case 107:o.value.number=2;break}})),console.log(o.value)})).catch((e=>{u.value=[]})),(e,n)=>{const t=W.l2,r=y.Le,v=U.JX,w=S.X2,p=h,k=m,g=a.zx;return(0,i.wg)(),(0,i.iD)("div",$,[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(t,{title:"预约历史详情","left-text":"返回","left-arrow":"",onClickLeft:f})])),_:1}),null!=(0,b.SU)(l)?((0,i.wg)(),(0,i.iD)("div",J,[P,(0,i._)("div",j,(0,C.zw)(s((0,b.SU)(l).status)),1)])):(0,i.kq)("",!0),(0,i._)("div",null,[null!=(0,b.SU)(l)?((0,i.wg)(),(0,i.iD)("div",H,[(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约编号")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).reservationId),1)])),_:1})])),_:1}),(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("设施地点名称")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).roomId),1)])),_:1})])),_:1}),(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("申请时间")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(q.fc)((0,b.SU)(l).applicationTime)),1)])),_:1})])),_:1}),(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约日期")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).reservationDate),1)])),_:1})])),_:1}),(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约时段")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(l).startTime)+" -"+(0,C.zw)((0,b.SU)(l).endTime),1)])),_:1})])),_:1}),(0,i.Wm)(w,{class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约方式")])),_:1}),"room"==(0,b.SU)(l).reservationType?((0,i.wg)(),(0,i.j4)(v,{key:0,span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("整体")])),_:1})):((0,i.wg)(),(0,i.j4)(v,{key:1,span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)("编号")])),_:1}))])),_:1}),"room_facility_code"==(0,b.SU)(l).reservationType?((0,i.wg)(),(0,i.j4)(w,{key:0,class:"row",align:"center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:"10",class:"c"},{default:(0,i.w5)((()=>[(0,i.Uk)("预约编号")])),_:1}),(0,i.Wm)(v,{span:"13",offset:"1"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,C.zw)((0,b.SU)(c)),1)])),_:1})])),_:1})):(0,i.kq)("",!0)])):(0,i.kq)("",!0)]),(0,i._)("div",F,[(0,i.Wm)(k,{direction:"vertical",active:(0,b.SU)(u).length-1>=0?(0,b.SU)(u).length-1:0},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,b.SU)(u),(n=>((0,i.wg)(),(0,i.j4)(p,{key:e.index},{default:(0,i.w5)((()=>[101==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",L,[O,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),102==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",A,[N,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),103==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",R,[X,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),104==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",Y,[Z,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),105==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",E,[M,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),106==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",Q,[B,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0),107==n.handlerCode?((0,i.wg)(),(0,i.iD)("div",G,[K,(0,i._)("p",null,(0,C.zw)((0,b.SU)(q.fc)(n.processingTime)),1)])):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["active"])]),(0,i._)("div",V,[2==(0,b.SU)(o).number?((0,i.wg)(),(0,i.j4)(g,{key:0,round:"",type:"success",color:"#fedd02",block:"",onClick:n[0]||(n[0]=e=>f())},{default:(0,i.w5)((()=>[(0,i.Uk)("返回")])),_:1})):(0,i.kq)("",!0),1==(0,b.SU)(o).number?((0,i.wg)(),(0,i.j4)(g,{key:1,round:"",type:"success",color:"red",block:"",onClick:n[1]||(n[1]=e=>d())},{default:(0,i.w5)((()=>[(0,i.Uk)("取消预约")])),_:1})):(0,i.kq)("",!0)])])}}},ne=t(8998);const te=(0,ne.Z)(ee,[["__scopeId","data-v-76d25a9b"]]);var ae=te},4332:function(e,n,t){t(1958),t(368),t(6742),t(2939),t(1452)},2304:function(e,n,t){t(1958),t(3737)},2480:function(e,n,t){t(1958),t(3737)}}]);
//# sourceMappingURL=recordDetail.2289ca63.js.map