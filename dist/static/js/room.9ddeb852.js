"use strict";(self["webpackChunkfacility_app"]=self["webpackChunkfacility_app"]||[]).push([[605],{1771:function(){},3105:function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var o=i(1883),n=(i(4498),i(5073)),l=(i(7038),i(5881)),r=(i(7370),i(7658),i(9812)),a=i(521),s=i(5893),d=i(644),c=i(1443);const u={class:"room"},f={class:"roomName"},v={class:"roomCapacity"},h=["onClick"];var m={__name:"RoomView",setup(e){let t=(0,d.tv)(),i=t.currentRoute.value.query.facilityId,m=t.currentRoute.value.query.buildingId;function g(e){console.log(e),t.back()}console.log(i,m);let p=(0,a.iH)(!1),x=(0,a.iH)(!1),b=(0,a.qj)([]);function w(){(0,c.pW)(i,m).then((e=>{p.value=!1,b=e.data,x.value=!0}))}function k(e){console.log(m),t.push({path:"/school/roomDetail",query:{roomId:e}})}return(e,t)=>{const i=l.l2,d=n.Le,c=o.aV;return(0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{title:"房间列表","left-text":"返回","left-arrow":"",onClickLeft:g})])),_:1}),(0,r.Wm)(c,{class:"list",loading:(0,a.SU)(p),"onUpdate:loading":t[0]||(t[0]=e=>(0,a.dq)(p)?p.value=e:p=e),finished:(0,a.SU)(x),"finished-text":"没有更多了",onLoad:w,offset:"0"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(b),((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"rounded-container",key:t,style:(0,s.j5)({"background-image":"url("+e.roomImage+")"})},[(0,r._)("div",f,(0,s.zw)(e.roomName),1),(0,r._)("div",v," 总容量： "+(0,s.zw)(e.roomCapacity)+" 位/台 ",1),(0,r._)("div",{class:"look",onClick:t=>k(e.roomId)},"立即查看",8,h)],4)))),128))])),_:1},8,["loading","finished"])])}}},g=i(8998);const p=(0,g.Z)(m,[["__scopeId","data-v-15271144"]]);var x=p},5487:function(e,t,i){i.d(t,{F:function(){return s}});var o=i(8586),n=i(521),l=i(9812),r=i(2792),a=i(5777);const s=(e,t)=>{const i=(0,n.iH)(),s=()=>{i.value=(0,o.EL)(e).height};return(0,l.bv)((()=>{if((0,l.Y3)(s),t)for(let e=1;e<=3;e++)setTimeout(s,100*e)})),(0,a.h)((()=>(0,l.Y3)(s))),(0,l.YP)([r.bn,r.uK],s),i}},221:function(e,t,i){i.d(t,{J:function(){return l}});var o=i(9812),n=i(5487);function l(e,t){const i=(0,n.F)(e,!0);return e=>(0,o.Wm)("div",{class:t("placeholder"),style:{height:i.value?`${i.value}px`:void 0}},[e()])}},2392:function(e,t,i){i.d(t,{a:function(){return n},d:function(){return l}});var o=i(9812);const n=Symbol(),l=()=>(0,o.f3)(n,null)},6755:function(e,t,i){i.d(t,{o:function(){return r}});var o=i(4391),n=i(9812),l=i(8586);function r(e,t){if(!o._f||!window.IntersectionObserver)return;const i=new IntersectionObserver((e=>{t(e[0].intersectionRatio>0)}),{root:document.body}),r=()=>{e.value&&i.observe(e.value)},a=()=>{e.value&&i.unobserve(e.value)};(0,n.se)(a),(0,n.Jd)(a),(0,l.Ib)(r)}},1883:function(e,t,i){i.d(t,{aV:function(){return x}});var o=i(2473),n=i(9812),l=i(521),r=i(1882),a=i(2469),s=i(2792),d=i(8586),c=i(4779),u=i(2392),f=i(8807);const[v,h,m]=(0,r["do"])("list"),g={error:Boolean,offset:(0,a.SI)(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:(0,a.SQ)("down"),loadingText:String,finishedText:String,immediateCheck:a.J5};var p=(0,n.aZ)({name:v,props:g,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:i}){const o=(0,l.iH)(e.loading),r=(0,l.iH)(),a=(0,l.iH)(),v=(0,u.d)(),g=(0,d.eo)(r),p=(0,n.Fl)((()=>e.scroller||g.value)),x=()=>{(0,n.Y3)((()=>{if(o.value||e.finished||e.disabled||e.error||!1===(null==v?void 0:v.value))return;const{direction:i}=e,n=+e.offset,l=(0,d.EL)(p);if(!l.height||(0,s.xj)(r))return;let c=!1;const u=(0,d.EL)(a);c="up"===i?l.top-u.top<=n:u.bottom-l.bottom<=n,c&&(o.value=!0,t("update:loading",!0),t("load"))}))},b=()=>{if(e.finished){const t=i.finished?i.finished():e.finishedText;if(t)return(0,n.Wm)("div",{class:h("finished-text")},[t])}},w=()=>{t("update:error",!1),x()},k=()=>{if(e.error){const t=i.error?i.error():e.errorText;if(t)return(0,n.Wm)("div",{role:"button",class:h("error-text"),tabindex:0,onClick:w},[t])}},W=()=>{if(o.value&&!e.finished&&!e.disabled)return(0,n.Wm)("div",{class:h("loading")},[i.loading?i.loading():(0,n.Wm)(f.gb,{class:h("loading-icon")},{default:()=>[e.loadingText||m("loading")]})])};return(0,n.YP)((()=>[e.loading,e.finished,e.error]),x),v&&(0,n.YP)(v,(e=>{e&&x()})),(0,n.ic)((()=>{o.value=e.loading})),(0,n.bv)((()=>{e.immediateCheck&&x()})),(0,c.F)({check:x}),(0,d.OR)("scroll",x,{target:p,passive:!0}),()=>{var t;const l=null==(t=i.default)?void 0:t.call(i),s=(0,n.Wm)("div",{ref:a,class:h("placeholder")},null);return(0,n.Wm)("div",{ref:r,role:"feed",class:h(),"aria-busy":o.value},["down"===e.direction?l:s,W(),b(),k(),"up"===e.direction?l:s])}}});const x=(0,o.n)(p)},4498:function(e,t,i){i(1958),i(2939)},5881:function(e,t,i){i.d(t,{l2:function(){return g}});var o=i(2473),n=i(9812),l=i(521),r=i(1882),a=i(2469),s=i(1417),d=i(8336),c=i(221),u=i(4874);const[f,v]=(0,r["do"])("nav-bar"),h={title:String,fixed:Boolean,zIndex:a.Or,border:a.J5,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:a.J5};var m=(0,n.aZ)({name:f,props:h,emits:["clickLeft","clickRight"],setup(e,{emit:t,slots:i}){const o=(0,l.iH)(),r=(0,c.J)(o,v),a=i=>{e.leftDisabled||t("clickLeft",i)},f=i=>{e.rightDisabled||t("clickRight",i)},h=()=>i.left?i.left():[e.leftArrow&&(0,n.Wm)(u.JO,{class:v("arrow"),name:"arrow-left"},null),e.leftText&&(0,n.Wm)("span",{class:v("text")},[e.leftText])],m=()=>i.right?i.right():(0,n.Wm)("span",{class:v("text")},[e.rightText]),g=()=>{const{title:t,fixed:l,border:r,zIndex:c}=e,u=(0,s.As)(c),g=e.leftArrow||e.leftText||i.left,p=e.rightText||i.right;return(0,n.Wm)("div",{ref:o,style:u,class:[v({fixed:l}),{[d.xe]:r,"van-safe-area-top":e.safeAreaInsetTop}]},[(0,n.Wm)("div",{class:v("content")},[g&&(0,n.Wm)("div",{class:[v("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?d.e9:""],onClick:a},[h()]),(0,n.Wm)("div",{class:[v("title"),"van-ellipsis"]},[i.title?i.title():t]),p&&(0,n.Wm)("div",{class:[v("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?d.e9:""],onClick:f},[m()])])])};return()=>e.fixed&&e.placeholder?r(g):g()}});const g=(0,o.n)(m)},7370:function(e,t,i){i(1958),i(368),i(6742)},5073:function(e,t,i){i.d(t,{Le:function(){return p}});var o=i(2473),n=i(9812),l=i(521),r=i(1882),a=i(2469),s=i(1417),d=i(4391),c=i(2792),u=i(8586),f=i(6755);const[v,h]=(0,r["do"])("sticky"),m={zIndex:a.Or,position:(0,a.SQ)("top"),container:Object,offsetTop:(0,a.SI)(0),offsetBottom:(0,a.SI)(0)};var g=(0,n.aZ)({name:v,props:m,emits:["scroll","change"],setup(e,{emit:t,slots:i}){const o=(0,l.iH)(),r=(0,u.eo)(o),a=(0,l.qj)({fixed:!1,width:0,height:0,transform:0}),v=(0,l.iH)(!1),m=(0,n.Fl)((()=>(0,s.LU)("top"===e.position?e.offsetTop:e.offsetBottom))),g=(0,n.Fl)((()=>{if(v.value)return;const{fixed:e,height:t,width:i}=a;return e?{width:`${i}px`,height:`${t}px`}:void 0})),p=(0,n.Fl)((()=>{if(!a.fixed||v.value)return;const t=(0,d.l7)((0,s.As)(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${m.value}px`});return a.transform&&(t.transform=`translate3d(0, ${a.transform}px, 0)`),t})),x=e=>t("scroll",{scrollTop:e,isFixed:a.fixed}),b=()=>{if(!o.value||(0,c.xj)(o))return;const{container:t,position:i}=e,n=(0,u.EL)(o),l=(0,c.cx)(window);if(a.width=n.width,a.height=n.height,"top"===i)if(t){const e=(0,u.EL)(t),i=e.bottom-m.value-a.height;a.fixed=m.value>n.top&&e.bottom>0,a.transform=i<0?i:0}else a.fixed=m.value>n.top;else{const{clientHeight:e}=document.documentElement;if(t){const i=(0,u.EL)(t),o=e-i.top-m.value-a.height;a.fixed=e-m.value<n.bottom&&e>i.top,a.transform=o<0?-o:0}else a.fixed=e-m.value<n.bottom}x(l)};return(0,n.YP)((()=>a.fixed),(e=>t("change",e))),(0,u.OR)("scroll",b,{target:r,passive:!0}),(0,f.o)(o,b),(0,n.YP)([c.bn,c.uK],(()=>{o.value&&!(0,c.xj)(o)&&a.fixed&&(v.value=!0,(0,n.Y3)((()=>{const e=(0,u.EL)(o);a.width=e.width,a.height=e.height,v.value=!1})))})),()=>{var e;return(0,n.Wm)("div",{ref:o,style:g.value},[(0,n.Wm)("div",{class:h({fixed:a.fixed&&!v.value}),style:p.value},[null==(e=i.default)?void 0:e.call(i)])])}}});const p=(0,o.n)(g)},7038:function(e,t,i){i(1958),i(1771)}}]);
//# sourceMappingURL=room.9ddeb852.js.map